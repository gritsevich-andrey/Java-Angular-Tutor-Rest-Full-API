<div class="carousel-container">
  <input type="text" placeholder="Поиск по названию программы..." [(ngModel)]="programName"
         [ngModelOptions]="{standalone: true}" (click)="searchInstructor=''; searchCategory = ''">
</div>

<div *ngIf="reloading" class="card-panel carousel-container">
  <select name="searchInstructor"
          [(ngModel)]="searchInstructor"
  >
    <optgroup label="Категории">
      <option value="" disabled>Выберите инструктора</option>
      <option
        matTooltip="Сортировка по категориям"
        matTooltipClass="tooltip-green"
        *ngFor="let instructorName of buyingProgram | removeduplicate: 'instructorName'"
        value="{{instructorName}}">{{instructorName}}
      </option>
    </optgroup>
  </select>
  <select name="searchCategory"
          [(ngModel)]="searchCategory"
  >
    <optgroup label="Категории">
      <option value="" disabled>Выберите категорию</option>
      <option
        matTooltip="Сортировка по категориям"
        matTooltipClass="tooltip-green"
        *ngFor="let category of buyingProgram | removeduplicate: 'category'"
        value="{{category}}">{{category}}
      </option>
    </optgroup>
  </select>
  <div class="left-10">
    <button mat-mini-fab aria-label="Обновить" color="accent"
            matTooltip="Обновить поиск"
            matTooltipClass="tooltip-green"
            class="btn"
            (click)="searchInstructor='';
           searchInstructor='';
            searchCategory = '' ">
      <mat-icon>refresh</mat-icon>
    </button>
  </div>
</div>

<table class="highlight mb2">
  <thead>
  <tr>
    <th>№</th>
    <th>Название</th>
    <th>Автор</th>
    <th>Дата</th>
    <th>Цена</th>
    <th>Оплачено</th>
    <th></th>
  </tr>
  </thead>

  <tbody>
  <tr *ngFor="let program of buyingProgram
  | search: programName | filter: searchCategory
  | searchInstructor: searchInstructor
   | paginate: {
      itemsPerPage: 50, currentPage: page,
       totalItems: totalLength
       }; let i=index">
    <td>{{i}}</td>
    <td>{{program.name}} </td>
    <td>{{program.instructorName}}</td>
    <td>{{program.date | date: 'medium'}}</td>
    <td>{{program.cost}} руб.</td>
    <td>{{program.payment}}</td>
  </tr>
  </tbody>
</table>
<div class="auth-block">
  <pagination-controls class="text-center my-pagination" (pageChange)="page = $event"></pagination-controls>
</div>
